# TesteUDS
# Script de Banco

CREATE TABLE UDS_ADICIONAL (	
    ID_ADICIONAL NUMBER(10,0) NOT NULL, 
	DE_ADICIONAL VARCHAR2(40 BYTE) NOT NULL, 
	VL_ADICIONAL NUMBER(10,2) NOT NULL, 
	QT_TEMPO_ADICIONAL NUMBER(2,0) NOT NULL, 
    CONSTRAINT PK_UDS_ADICIONAL PRIMARY KEY (ID_ADICIONAL)
);

INSERT INTO UDS_ADICIONAL VALUES (1, 'EXTRA BACON', 3, 0);
INSERT INTO UDS_ADICIONAL VALUES (2, 'SEM CEBOLA', 0, 0);
INSERT INTO UDS_ADICIONAL VALUES (3, 'BORDA RECHEADA', 5, 5);
COMMIT;

CREATE TABLE UDS_SABOR (	
    ID_SABOR NUMBER(10,0) NOT NULL, 
	CD_SABOR VARCHAR2(2 BYTE) NOT NULL, 
	DE_SABOR VARCHAR2(40 BYTE) NOT NULL, 
	QT_TEMPO_ADICIONAL NUMBER(2,0) NOT NULL, 
	CONSTRAINT PK_UDS_SABOR PRIMARY KEY (ID_SABOR)
);

INSERT INTO UDS_SABOR VALUES (1, 'C', 'CALABRESA', 0);
INSERT INTO UDS_SABOR VALUES (2, 'M', 'MARGUERITA', 0);
INSERT INTO UDS_SABOR VALUES (3, 'P', 'PORTUGUESA', 5);
COMMIT;

CREATE TABLE UDS_TAMANHO(	
    ID_TAMANHO NUMBER(10,0) NOT NULL, 
	CD_TAMANHO VARCHAR2(2 BYTE) NOT NULL, 
	DE_TAMANHO VARCHAR2(40 BYTE) NOT NULL, 
	VL_TAMANHO NUMBER(10,2) NOT NULL, 
	QT_TEMPO NUMBER(2,0) NOT NULL, 
    CONSTRAINT PK_UDS_TAMANHO PRIMARY KEY (ID_TAMANHO)
);

INSERT INTO UDS_TAMANHO VALUES (1, 'P', 'PEQUENA', 20, 15);
INSERT INTO UDS_TAMANHO VALUES (2, 'M', 'MÃ‰DIA', 30, 20);
INSERT INTO UDS_TAMANHO VALUES (3, 'G', 'GRANDE', 40, 25);
COMMIT;

CREATE TABLE UDS_PIZZA ( 
    ID_PIZZA NUMBER(10,0) NOT NULL, 
	ID_SABOR NUMBER(10,0) NOT NULL, 
	ID_TAMANHO NUMBER(10,0) NOT NULL, 
    CONSTRAINT PK_UDS_PIZZA PRIMARY KEY (ID_PIZZA),
    CONSTRAINT FK_UDS_SABOR FOREIGN KEY (ID_SABOR)
	  REFERENCES UDS_SABOR (ID_SABOR), 
    CONSTRAINT FK_UDS_TAMANHO FOREIGN KEY (ID_TAMANHO)
	  REFERENCES UDS_TAMANHO (ID_TAMANHO)
);

CREATE TABLE UDS_PERSONALIZACAO (
    ID_PIZZA NUMBER(10,0) NOT NULL, 
	ID_ADICIONAL NUMBER(10,0) NOT NULL, 
    CONSTRAINT PK_UDS_PERSONALIZACAO PRIMARY KEY (ID_PIZZA, ID_ADICIONAL),
    CONSTRAINT FK_UDS_PIZZA FOREIGN KEY (ID_PIZZA)
	  REFERENCES UDS_PIZZA (ID_PIZZA) ON DELETE CASCADE, 
    CONSTRAINT FK_UDS_ADICIONAL FOREIGN KEY (ID_ADICIONAL)
	  REFERENCES UDS_ADICIONAL (ID_ADICIONAL) ENABLE
);

CREATE TABLE UDS_PEDIDO (	
    ID_PEDIDO NUMBER(10,0) NOT NULL, 
	VL_PEDIDO NUMBER(10,2) NOT NULL,
    QT_TEMPO NUMBER(2) NOT NULL,
    CONSTRAINT PK_UDS_PEDIDO PRIMARY KEY (ID_PEDIDO)
);

CREATE TABLE UDS_PEDIDO_DETALHE (	
    ID_PEDIDO NUMBER(10,0) NOT NULL, 
    ID_PIZZA NUMBER(10,0) NOT NULL,
	VL_PIZZA NUMBER(10,2) NOT NULL,
    QT_TEMPO NUMBER(2) NOT NULL,
    CONSTRAINT PK_UDS_PEDIDO_DETALHE PRIMARY KEY (ID_PEDIDO, ID_PIZZA),
    CONSTRAINT FK_UDS_PEDIDO FOREIGN KEY (ID_PEDIDO)
	  REFERENCES UDS_PEDIDO (ID_PEDIDO) ON DELETE CASCADE,
    CONSTRAINT FK_UDS_PIZZA1 FOREIGN KEY (ID_PIZZA)
	  REFERENCES UDS_PIZZA (ID_PIZZA)
);

CREATE TABLE UDS_PEDIDO_DETALHE_PERSON (	
    ID_PEDIDO NUMBER(10,0) NOT NULL, 
    ID_PIZZA NUMBER(10,0) NOT NULL,
    ID_ADICIONAL NUMBER(10,0) NOT NULL,
	VL_PERSONALIZACAO NUMBER(10,2) NOT NULL,
    CONSTRAINT PK_UDS_PEDIDO_DETALHE_PERSON PRIMARY KEY (ID_PEDIDO, ID_PIZZA, ID_ADICIONAL),
    CONSTRAINT FK_UDS_PEDIDO1 FOREIGN KEY (ID_PEDIDO)
	  REFERENCES UDS_PEDIDO (ID_PEDIDO) ON DELETE CASCADE,
    CONSTRAINT FK_UDS_PERSONALIZACAO FOREIGN KEY (ID_PIZZA, ID_ADICIONAL)
	  REFERENCES UDS_PERSONALIZACAO (ID_PIZZA, ID_ADICIONAL)
);

